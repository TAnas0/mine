---
import { Image } from "astro:assets";
import { profile } from "../../settings";
import SocialIcons from "./SocialIcons.astro";
import ProfilePictures from "@/assets/elfowl.png";
import { getCollection } from "astro:content";
import { template } from "@/settings";

const isBlogPopulated = await getCollection("blog").then(
  (collection) => collection.length > 0
);

const { fullName, title } = profile;
let isSidebarOpen = true; // By default, sidebar is open

---

<aside
  id="sidebar"
  class={`px-4 pt-4 h-screen bg-base-200 text-base-content flex flex-col transition-all duration-300 ease-in-out w-[20rem]`}
>
  <!-- Button to Toggle Sidebar -->
  <button
  	id="toggle-sidebar"
    class="absolute top-4 left-4 p-2 lg:block hidden"
  >
    <span id="icon-close">
      <svg
        class="w-6 h-6 text-base-content"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        stroke-width="2"
        >
        <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="M6 18L18 6M6 6l12 12"
        />
      </svg>
    </span>
    <span id="icon-open" class="hidden">
      <svg
        class="w-6 h-6 text-base-content"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        stroke-width="2"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M4 6h16M4 12h16M4 18h16"
        />
      </svg>
    </span>
  </button>

  <div class="flex flex-col my-8 justify-between h-full">
    <div>
      <div class="flex justify-center items-center flex-col">
        <Image
          class="mask mask-circle"
          src={ProfilePictures}
          alt={`Profile picture of ${fullName}`}
        />
        <h1 class="text-lg font-black hidden lg:block">
          {title}
          <span>{fullName}</span>
        </h1>
      </div>
      <div class="mt-8">
        <ul class="space-y-4 menu grow shrink menu-md overflow-y-auto">
          <li>
            <a href={`${template.base}/`} class="text-lg">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l9-9 9 9M4 10v10h6v-6h4v6h6V10" />
              </svg>
              Home
            </a>
          </li>
          {
            isBlogPopulated && (
              <li>
                <a href={`${template.base}/blog/1`} class="text-lg">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h7l2 2h5a2 2 0 012 2v12a2 2 0 01-2 2z" />
                  </svg>
                  Blog
                </a>
              </li>
            )
          }
          <li>
            <a href={`${template.base}/contact`} class="text-lg">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12H8m0 0l4-4m-4 4l4 4" />
              </svg>
              Contact
            </a>
          </li>
          <li>
            <a href={`${template.base}/schedulecall`} class="text-lg">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8h2a2 2 0 002-2v-5a2 2 0 00-2-2h-2V7a2 2 0 00-2-2h-4a2 2 0 00-2 2v2H5a2 2 0 00-2 2v5a2 2 0 002 2h2" />
              </svg>
              Chat sometime?
            </a>
          </li>
          <li>
            <a href={`${template.base}/cv`} class="text-lg">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6M5 6h14a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2z" />
              </svg>
              CV
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="mx-4">
      <SocialIcons />
    </div>
  </div>
</aside>

<script>
</script>
